import { Injectable } from "@angular/core";

@Injectable()
export class UtilProvider {

    constructor() { }

    /**
     * 合并两个对象
     * 最后一个参数是是否将后一个的值全部赋值给前一个，boolean
     */
    extend(...items: any[]) {
        let full = false;
        let b = items.splice(items.length - 1, 1)[0];
        if (typeof b == "boolean") {
            full = b;
            b = items.splice(items.length - 1, 1)[0];
        }
        let a = items.splice(items.length - 1, 1)[0];
        if (!a && b) {
            return b;
        }
        if (typeof a == typeof b && typeof a == "object") {
            for (let key in full ? b : a) {
                if (typeof a[key] == typeof b[key] && typeof a[key] == "object") {
                    a[key] = this.extend(a[key], b[key]);
                } else {
                    if (typeof b[key] != 'undefined') {
                        a[key] = b[key];
                    }
                }
            }
            items.push(a);
            items.push(full);
            return this.extend.apply(this, items);
        } else {
            return a;
        }
    }

}